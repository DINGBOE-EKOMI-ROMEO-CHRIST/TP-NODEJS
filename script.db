CREATE DATABASE nodedatabase;
USE nodedatabase;

CREATE TABLE Salle (
    id_salle INT PRIMARY KEY AUTO_INCREMENT,
    Nom_salle VARCHAR(100) NOT NULL,
    createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE Projecteurs (
    id_Projecteur INT PRIMARY KEY AUTO_INCREMENT,
    nom_Projecteur VARCHAR(100) NOT NULL,
    Disponibilite BOOLEAN NOT NULL DEFAULT TRUE,
    createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE Users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL,
    password VARCHAR(100) NOT NULL,
    role ENUM('student', 'teacher', 'admin') DEFAULT 'student',
    salle INT DEFAULT NULL,
    createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (salle) REFERENCES Salle(id_salle)
);

CREATE TABLE Reservations (
    id_Reservation INT PRIMARY KEY AUTO_INCREMENT,
    id INT NOT NULL,
    id_Projecteur INT NOT NULL,
    id_salle INT NOT NULL,
    Heure_debut_reservation DATETIME NOT NULL,
    Heure_fin_reservation DATETIME NOT NULL,
    createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (id) REFERENCES Users (id),
    FOREIGN KEY (id_Projecteur) REFERENCES Projecteur(id_Projecteur),
    FOREIGN KEY (id_salle) REFERENCES Salle(id_salle)
);
